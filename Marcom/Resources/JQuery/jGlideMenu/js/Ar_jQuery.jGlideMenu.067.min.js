jQuery.jGlideMenu = { useDropShadow: new Boolean, useDragDrop: new Boolean, defaultScrollSpeed: new Number(0), defaultScrollBackSpeed: new Number(0), slideRight: new Boolean, useSmoothScrolling: new Boolean, easeFx: new String(""), closeLinkMarkUp: new String(""), menuShowFx: new String(""), menuHideFx: new String(""), tileWidth: new Number(0), tileInset: new Number(0), itemsToDisplay: new Number(8), useTileURL: new Boolean, tileSource: new String(""), URLParams: new Object, loadImage: new String(""), loadImageStyle: new Object, initialTile: new String(""), alertOnError: new Boolean, captureLinks: new Boolean, imagePath: new String, tileCount: new Number(0), animation: new Boolean, helperImage: new Boolean, currentElement: new Object, currentElementID: new String(""), hasDragDropSupport: new Boolean, hasShadowSupport: new Boolean, displayToggle: new Boolean, tileScrollPosition: new Array, smoothScrollTimer: new Array, mouseHover: new Boolean, demoMode: new Boolean, initialize: function (e) { return this.each(function () { jQuery.jGlideMenu.animation = false; jQuery.jGlideMenu.helperImage = false; jQuery.jGlideMenu.hasDragDropSupport = false; jQuery.jGlideMenu.hasShadowSupport = false; jQuery.jGlideMenu.tileCount = 0; jQuery.jGlideMenu.displayToggle = false; jQuery.jGlideMenu.mouseHover = false; jQuery.jGlideMenu.demoMode = false; jQuery.jGlideMenu.currentElement = jQuery(this); if (this.id) jQuery.jGlideMenu.currentElementID = this.id; var t = { itemsToDisplay: 12, tileInset: -2, tileWidth: 300, useDropShadow: false, slideRight: true, useDragDrop: true, useSmoothScrolling: true, useTileURL: false, defaultScrollSpeed: 750, defaultScrollBackSpeed: 800, tileSource: "myTiles", URLParams: {}, closeLinkMarkUp: "Close", menuShowFx: "fadeIn", menuHideFx: "fadeOut", easeFx: "linear", loadImage: "../../Resources/JQuery/jGlideMenu/img/ajax.gif", initialTile: "tile_050", alertOnError: false, captureLinks: true, loadImageStyle: { position: "absolute", bottom: "10px", left: "10px", "z-index": "999" }, imagePath: "../../Resources/JQuery/jGlideMenu/img/", demoMode: false }; if (e) jQuery.extend(t, e); jQuery.jGlideMenu.checkFeatures(); if (t.closeLinkMarkUp.length < 1) t.closeLinkMarkUp = "x Close"; if (parseInt(t.itemsToDisplay) < 1) t.itemsToDisplay = 1; if (t.initialTile.length < 0) jQuery.jGlideMenu.errorTrap("Invalid Configuration"); for (i in t) jQuery.jGlideMenu[i] = t[i]; if (jQuery.jGlideMenu.useTileURL == false && jQuery.jGlideMenu.tileSource.length > 0) { jQuery(jQuery.jGlideMenu.tileSource).css("display", "none"); jQuery(jQuery.jGlideMenu.currentElement).children().not(jQuery.jGlideMenu.tileSource).remove() } else jQuery(jQuery.jGlideMenu.currentElement).html(""); jQuery(jQuery.jGlideMenu.currentElement).append('<div class="jGM_wrapper" id="jGM_wrapper_' + this.id + '"></div>'); var n = document.createElement("img"); n.src = jQuery.jGlideMenu.loadImage; n.style.display = "none"; n.id = "jGM_helper" + jQuery.jGlideMenu.currentElementID; jQuery(jQuery.jGlideMenu.currentElement).append(n); jQuery("img#" + n.id).css(jQuery.jGlideMenu.loadImageStyle); jQuery.jGlideMenu.helperImage = true; if (jQuery.jGlideMenu.hasDragDropSupport == true && jQuery.jGlideMenu.useDragDrop == true) { if (jQuery.isFunction(jQuery("body").Draggable)) jQuery(this).Draggable({ handle: ".jGM_header" }); else jQuery(this).draggable({ handle: ".jGM_header" }) } if (jQuery.jGlideMenu.hasShadowSupport == true && jQuery.jGlideMenu.useDropShadow == true) { if (jQuery.isFunction(jQuery("body").dropShadow)) jQuery(this).dropShadow(); else jQuery(this).shadow({ color: "#cccccc" }) } jQuery(jQuery.jGlideMenu.currentElement).find("div.jGM_header a").bind("click", function () { if (jQuery.jGlideMenu.displayToggle == true) return false; jQuery.jGlideMenu.toggleDisplay(true); return false }); jQuery(this).hover(function () { jQuery.jGlideMenu.mouseHover = true }, function () { jQuery.jGlideMenu.mouseHover = false }); jQuery(document).keydown(function (e) { return true; var t = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0; if (t == 32 && jQuery.jGlideMenu.mouseHover == false) { jQuery.jGlideMenu.toggleDisplay(); return } if (jQuery.jGlideMenu.mouseHover == false) return false; switch (t) { case 37: break; case 38: break; case 39: break; case 40: break; case 13: break; case 32: jQuery.jGlideMenu.toggleDisplay(); return; break } }); jQuery.jGlideMenu.loadTile(jQuery.jGlideMenu.initialTile, jQuery.jGlideMenu.URLParams) }) }, toggleDisplay: function (e) { jQuery.jGlideMenu.displayToggle = true; jQuery.jGlideMenu.mouseHover == false; if (jQuery(jQuery.jGlideMenu.currentElement).css("display") == "block") var t = 0; else var t = 1; jQuery(jQuery.jGlideMenu.currentElement).animate({ opacity: t }, "slow", function () { if (e == true) { jQuery.jGlideMenu.scrollToTile(0, jQuery.jGlideMenu.defaultScrollBackSpeed); jQuery.jGlideMenu.tileScrollPosition[0] = 0 } if (t > 0) jQuery(this).css("display", "block"); else jQuery(this).css("display", "none"); jQuery.jGlideMenu.displayToggle = false }) }, checkFeatures: function () { jQuery.jGlideMenu.hasDragDropSupport = jQuery.isFunction(jQuery("body").Draggable); if (jQuery.jGlideMenu.hasDragDropSupport == false) jQuery.jGlideMenu.hasDragDropSupport = jQuery.isFunction(jQuery("body").draggable); jQuery.jGlideMenu.hasShadowSupport = jQuery.isFunction(jQuery("body").dropShadow); if (jQuery.jGlideMenu.hasShadowSupport == false) jQuery.jGlideMenu.hasShadowSupport = jQuery.isFunction(jQuery("body").shadow); return }, parseURL: function (e) { if (!jQuery.browser.msie) { return e } if (e.indexOf("#tile_") < 0) { return e } var t = e.split("#"); return "#" + t[t.length - 1] }, countTiles: function () { jQuery.jGlideMenu.tileCount = parseInt(jQuery("div.jGM_tile").size()) }, loadTile: function (e, t) { var n = document.createElement("div"); var r = jQuery.jGlideMenu.tileCount + 1; n.id = "jGM_tile_" + jQuery.jGlideMenu.currentElementID + "_" + r; if (jQuery.jGlideMenu.slideRight == true) var i = jQuery.jGlideMenu.tileWidth * jQuery.jGlideMenu.tileCount + jQuery.jGlideMenu.tileInset; else var i = jQuery.jGlideMenu.tileWidth * jQuery.jGlideMenu.tileCount * -1 + jQuery.jGlideMenu.tileInset; jQuery("#jGM_wrapper_" + jQuery.jGlideMenu.currentElementID).append(n); jQuery("#" + n.id).addClass("jGM_tile").css({ top: 0, right: i + "px", width: "300px", position: "absolute", overflow: "hidden", margin: 0, padding: 0, border: 0, display: "block" }); var s = '<div style="height:100%;margin:0;border:0;width:100%;padding:0;text-align:center;">' + "<h3>Missing Tile</h3><p>Unable to locate the requested Tile</p></div>"; if (jQuery.jGlideMenu.useTileURL == false) { if (jQuery("ul#" + e).size() < 1) { jQuery.jGlideMenu.errorTrap("Invalid Tile Request"); return false } var o = jQuery("ul#" + e).attr("title"); var u = jQuery("ul#" + e).attr("alt"); var a = jQuery("ul#" + e + " li").size(); var f = []; jQuery("ul#" + e + " li").each(function () { if (jQuery("a", this).size() > 0) f[f.length] = [jQuery("a", this).attr("href"), jQuery("a", this).text(), 1]; else f[f.length] = [jQuery(this).attr("rel"), jQuery(this).text(), 0] }); var s = jQuery.jGlideMenu.buildTile(o, u, f) } else { if (jQuery.jGlideMenu.tileSource.length < 1) { jQuery.jGlideMenu.errorTrap("Invalid AJAX Request"); return false } var l = "img#jGM_helper" + jQuery.jGlideMenu.currentElementID; jQuery(l).ajaxStart(function () { jQuery(this).animate({ opacity: "show" }, "fast") }).ajaxStop(function () { jQuery(this).animate({ opacity: "hide" }, "slow") }); t.tile = e; jQuery.ajax({ type: "POST", url: jQuery.jGlideMenu.tileSource, data: t, async: false, success: function (n) { jQuery("body").append('<div id="jGM_temp_' + jQuery.jGlideMenu.currentElementID + t.tile + '" style="display:none;">' + n + "</div>"); if (jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile + " ul#" + e).size() < 1) { jQuery.jGlideMenu.errorTrap("AJAX: Invalid Tile Request"); return false } var r = jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile + " ul#" + e).attr("title"); var i = jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile + " ul#" + e).attr("alt"); var o = jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile + " ul#" + e + " li").size(); var u = []; jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile + " ul#" + e + " li").each(function () { if (jQuery("a", this).size() > 0) u[u.length] = [jQuery("a", this).attr("href"), jQuery("a", this).text(), 1]; else u[u.length] = [jQuery(this).attr("rel"), jQuery(this).text(), 0] }); jQuery("#jGM_temp_" + jQuery.jGlideMenu.currentElementID + t.tile).remove(); s = jQuery.jGlideMenu.buildTile(r, i, u); jQuery(l).ajaxStart(function () { }).ajaxStop(function () { }) }, error: function (e) { jQuery.jGlideMenu.errorTrap("Invalid AJAX Tile Request"); jQuery(l).ajaxStart(function () { }).ajaxStop(function () { }) } }) } jQuery("#" + n.id).html(s); jQuery("#" + n.id + " div.jGM_content a").bind("click", function () { var e = ""; e = jQuery.jGlideMenu.parseURL(jQuery(this).attr("href")); if (e.length < 1) { return false } if (e.substr(0, 1) == "#") { if (jQuery.jGlideMenu.animation == true) return false; var t = e.substr(1, e.length - 1); jQuery.jGlideMenu.loadTile(t, jQuery.jGlideMenu.URLParams); return false } else { if (jQuery.jGlideMenu.demoMode) { alert("Navigation Requestion: " + e) } else { window.location.href = e } if (jQuery.jGlideMenu.captureLinks == true) return false } return true }); jQuery.jGlideMenu.countTiles(); if (jQuery.jGlideMenu.tileCount > 1) { jQuery("#" + n.id).append('<div class="jGM_back"><a href="#">رجوع</a></div>'); jQuery("#" + n.id + " div.jGM_back").bind("click", function () { if (jQuery.jGlideMenu.animation == true) return false; jQuery.jGlideMenu.scrollToTile(r - 1, jQuery.jGlideMenu.defaultScrollBackSpeed); return false }); if (jQuery.jGlideMenu.tileCount > 2) { jQuery("#" + n.id).append('<div class="jGM_reset"><a href="#">الرئيسية</a></div>'); jQuery("#" + n.id + " div.jGM_reset").bind("click", function () { if (jQuery.jGlideMenu.animation == true) return false; jQuery.jGlideMenu.scrollToTile(1, jQuery.jGlideMenu.defaultScrollBackSpeed); return false }) } } jQuery.jGlideMenu.tileScrollPosition[r] = 0; jQuery.jGlideMenu.drawPagers(n.id, jQuery("#" + n.id + " .jGM_content a").size()); if (jQuery.jGlideMenu.useSmoothScrolling == false) { jQuery("#" + n.id + " .jGM_pager a").click(function () { var e = 1; if (jQuery(this).attr("rel") == "Up") e = 0; jQuery.jGlideMenu.scrollItems(e) }) } else { jQuery("#" + n.id + " .jGM_pager a").hover(function () { var e = 1; if (jQuery(this).attr("rel") == "Up") e = 0; jQuery.jGlideMenu.smoothScrollTimer[jQuery.jGlideMenu.tileCount] = window.setInterval("jQuery.jGlideMenu.scrollItems(" + e + ")", 250) }, function () { window.clearInterval(jQuery.jGlideMenu.smoothScrollTimer[jQuery.jGlideMenu.tileCount]) }) } jQuery.jGlideMenu.scrollToTile(r, jQuery.jGlideMenu.defaultScrollSpeed) }, scrollItems: function (e) { var t = "#jGM_tile_" + jQuery.jGlideMenu.currentElementID + "_" + jQuery.jGlideMenu.tileCount; var n = jQuery(t + " .jGM_content a"); var r = jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount]; if (r <= 0 && e == 0) return; if (r + jQuery.jGlideMenu.itemsToDisplay - 2 >= jQuery(n).size() && e == 1) return; if (e == 0) jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount]--; else jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount]++; jQuery(n).show(); jQuery(t + " .jGM_content").children("a:lt(" + jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount] + ")").hide(); jQuery.jGlideMenu.drawPagers(t.substr(1, t.length), jQuery(n).size()) }, drawPagers: function (e, t) { jQuery("#" + e + " .jGM_pager").find("a").each(function () { if (jQuery(this).attr("rel") == "Up") { if (jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount] > 0) jQuery(this).css("display", "block"); else jQuery(this).css("display", "none") } else { if (jQuery.jGlideMenu.tileScrollPosition[jQuery.jGlideMenu.tileCount] + jQuery.jGlideMenu.itemsToDisplay - 2 < jQuery("#" + e + " .jGM_content a").size()) jQuery(this).css("display", "block"); else jQuery(this).css("display", "none") } }) }, cleanTiles: function (e) { var t = e + 1; var n = jQuery.jGlideMenu.tileCount; if (e >= n) return false; for (var r = t; r <= n; r++) { jQuery("#jGM_tile_" + jQuery.jGlideMenu.currentElementID + "_" + r).remove(); jQuery.jGlideMenu.tileScrollPosition[r] = 0 } jQuery.jGlideMenu.countTiles(); return }, scrollToTile: function (e, t) { jQuery.jGlideMenu.countTiles(); var n = jQuery.jGlideMenu.tileCount; if (e > n) e = n; if (e < 1) e = 1; if (!t) t = jQuery.jGlideMenu.defaultScrollSpeed; var r = jQuery.jGlideMenu.tileWidth * e - jQuery.jGlideMenu.tileWidth; var i = jQuery.jGlideMenu.slideRight == true ? r * -1 : r; jQuery.jGlideMenu.animation = true; jQuery("div#jGM_wrapper_" + jQuery.jGlideMenu.currentElementID).animate({ right: i }, t, jQuery.jGlideMenu.easeFx, function () { if (e < n) jQuery.jGlideMenu.cleanTiles(e); if (i != 0) i += "px"; jQuery(this).css({ right: i }); jQuery.jGlideMenu.animation = false }) }, buildTile: function (e, t, n) { if (jQuery.jGlideMenu.imagePath.length > 1 && jQuery.jGlideMenu.imagePath.substr(-1, 1) != "/") jQuery.jGlideMenu.imagePath += "/"; var r = new String(""); r = '<div class="jGM_cats"><img src=' + e + '><p class="jGM_desc">' + t + "</p></div>"; r += '<div class="jGM_pager"><a href="#" rel="Up" title="Scroll Up" style="display:none"><span>المزيد</span></a></div>'; r += '<div class="jGM_content">'; for (var i = 0; i < n.length; i++) { var s = n[i][2] == 1 ? "" : "#"; var o = n[i][2] == 1 ? "" : ' class="jGM_more"'; r += '<a href="' + s + n[i][0] + '"' + o + ">" + n[i][1] + "</a>" } r += "</div>"; r += '<div class="jGM_pager"><a href="#" rel="Down" title="Scroll Down" style="display:none"><span>المزيد</span></a></div>'; return r }, errorTrap: function (e) { if (jQuery.jGlideMenu.alertOnError == true) alert(e); return } }; jQuery.fn.jGlideMenu = jQuery.jGlideMenu.initialize; jQuery.fn.jGlideMenuToggle = jQuery.jGlideMenu.toggleDisplay; jQuery.fn.reverse = function () { return this.pushStack(this.get().reverse(), arguments) }